<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Normal Stickman TCG</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        nav ul { list-style-type: none; padding: 0; }
        nav li { display: inline-block; margin: 0 1em; }
        a { text-decoration: none; color: #000; cursor: pointer; }
        section { display: none; margin-top: 1em; }
        .card { margin: 0.5em 0; }
        .matched { background-color: #cfc; }
    </style>
</head>
<body>
    <h1>Normal Stickman TCG</h1>
    <nav>
        <ul>
            <li><a id="home-link">Home</a></li>
            <li><a id="packs-link">Packs</a></li>
            <li><a id="deck-link">Deck Builder</a></li>
            <li><a id="play-link">Play</a></li>
            <li><a id="games-link">Games</a></li>
            <li><a id="cards-link">Cards</a></li>
            <li><a id="about-link">About</a></li>
        </ul>
    </nav>

    <section id="home-section">
        <p>Welcome to Normal Stickman TCG!</p>
    </section>

    <section id="packs-section">
        <h2>Open Packs</h2>
        <p>Stickoins: <span class="balance"></span></p>
        <button id="open-pack">Open Pack (30 Stickoins)</button>
        <div id="pack-results"></div>
    </section>

    <section id="deck-section">
        <h2>Deck Builder</h2>
        <div id="deck-content"></div>
    </section>

    <section id="play-section">
        <p>Coming soon...</p>
    </section>

    <section id="games-section">
        <h2>Memory Match</h2>
        <p>Stickoins: <span class="balance"></span></p>
        <button id="start-game">Play (15 Stickoins)</button>
        <p id="timer" style="display:none;">10</p>
        <div id="game-board"></div>
    </section>

    <section id="cards-section">
        <h2>Your Cards</h2>
        <div id="cards-content"></div>
    </section>

    <section id="about-section">
        <h2>About</h2>
        <p><strong>Normal Stickman TCG</strong> is a simple browser-based trading card game featuring stick figure characters. Build decks and explore basic gameplay using nothing more than HTML and JavaScript.</p>
        <p>This project began as a small hobby to practice web development. Your deck data is stored locally in your browser, and more cards and features are planned for the future.</p>
    </section>

    <script>
        const links = {
            'home-link': 'home-section',
            'packs-link': 'packs-section',
            'deck-link': 'deck-section',
            'play-link': 'play-section',
            'games-link': 'games-section',
            'cards-link': 'cards-section',
            'about-link': 'about-section'
        };

        const sections = Object.values(links).map(id => document.getElementById(id));

        Object.keys(links).forEach(linkId => {
            document.getElementById(linkId).addEventListener('click', function(e) {
                e.preventDefault();
                showSection(links[linkId]);
            });
        });

        let deck = JSON.parse(localStorage.getItem('deck') || '[]');
        let collection = JSON.parse(localStorage.getItem('collection') || '[]');
        let stickoins = parseInt(localStorage.getItem('stickoins') || '300');

        function saveData() {
            localStorage.setItem('deck', JSON.stringify(deck));
            localStorage.setItem('collection', JSON.stringify(collection));
            localStorage.setItem('stickoins', stickoins);
        }

        function showSection(id) {
            sections.forEach(sec => sec.style.display = 'none');
            const section = document.getElementById(id);
            if(section) section.style.display = 'block';
            if(id === 'deck-section') updateDeck();
            if(id === 'packs-section' || id === 'games-section') updateBalance();
            if(id === 'cards-section') updateCards();
        }

        function updateBalance() {
            document.querySelectorAll('.balance').forEach(el => el.textContent = stickoins);
        }

        document.getElementById('open-pack').addEventListener('click', openPack);

        function openPack() {
            if(stickoins < 30) {
                alert('Not enough Stickoins!');
                return;
            }
            stickoins -= 30;
            const pulled = [];
            for(let i=0;i<5;i++) {
                let rarity = 'Common';
                if(i >= 3) {
                    const r = Math.random() * 100;
                    if(r < 1) rarity = 'Legendary';
                    else if(r < 6) rarity = 'Epic';
                    else if(r < 16) rarity = 'Rare';
                }
                pulled.push({name: rarity + ' Stickman', rarity});
                collection.push(pulled[pulled.length-1]);
            }
            saveData();
            updateBalance();
            displayPackResults(pulled);
            updateCards();
        }

        function displayPackResults(cards) {
            const div = document.getElementById('pack-results');
            div.innerHTML = '<p>Pack contents:</p><ul>' + cards.map(c => `<li>${c.name} (${c.rarity})</li>`).join('') + '</ul>';
        }

        function updateCards() {
            const container = document.getElementById('cards-content');
            if(collection.length === 0) {
                container.textContent = 'No cards in collection.';
                return;
            }
            container.innerHTML = '';
            collection.forEach((card, index) => {
                const div = document.createElement('div');
                div.className = 'card';
                div.textContent = `${card.name} (${card.rarity}) `;

                const addBtn = document.createElement('button');
                addBtn.textContent = 'Add to Deck';
                addBtn.onclick = function() {
                    deck.push(card.name);
                    collection.splice(index,1);
                    saveData();
                    updateCards();
                };

                const sellBtn = document.createElement('button');
                sellBtn.textContent = `Sell (${sellValue(card.rarity)})`;
                sellBtn.onclick = function() {
                    stickoins += sellValue(card.rarity);
                    collection.splice(index,1);
                    saveData();
                    updateBalance();
                    updateCards();
                };

                div.appendChild(addBtn);
                div.appendChild(sellBtn);
                container.appendChild(div);
            });
        }

        function sellValue(rarity) {
            switch(rarity) {
                case 'Rare': return 40;
                case 'Epic': return 150;
                case 'Legendary': return 300;
                default: return 15;
            }
        }

        function updateDeck() {
            const deckContent = document.getElementById('deck-content');
            if(deck.length === 0) {
                if(confirm('Would you like the Stickman Basics deck?')) {
                    deck = ['Stickman 1', 'Stickman 2', 'Stickman 3'];
                    saveData();
                    deckContent.textContent = 'Stickman Basics deck added!';
                } else {
                    deckContent.textContent = 'You have no cards.';
                }
            } else {
                deckContent.innerHTML = '<p>Your Deck:</p><ul>' + deck.map(card => `<li>${card}</li>`).join('') + '</ul>';
            }
        }

        document.getElementById('start-game').addEventListener('click', startGame);

        function startGame() {
            if(stickoins < 15) {
                alert('Not enough Stickoins!');
                return;
            }
            stickoins -= 15;
            updateBalance();
            saveData();

            const board = document.getElementById('game-board');
            board.innerHTML = '';
            const timer = document.getElementById('timer');
            timer.style.display = 'block';
            timer.textContent = 10;

            const values = ['A','A','B','B'];
            values.sort(() => Math.random() - 0.5);

            let flipped = [];
            let matched = 0;
            values.forEach(val => {
                const btn = document.createElement('button');
                btn.textContent = '?';
                btn.dataset.value = val;
                btn.onclick = function() { flipCard(btn); };
                board.appendChild(btn);
            });

            const countdown = setInterval(() => {
                timer.textContent = parseInt(timer.textContent) - 1;
                if(parseInt(timer.textContent) <= 0) endGame(false);
            }, 1000);

            function flipCard(card) {
                if(card.classList.contains('matched') || flipped.includes(card) || flipped.length === 2) return;
                card.textContent = card.dataset.value;
                flipped.push(card);
                if(flipped.length === 2) {
                    if(flipped[0].dataset.value === flipped[1].dataset.value) {
                        flipped.forEach(c => { c.classList.add('matched'); c.disabled = true; });
                        matched += 2;
                        flipped = [];
                        if(matched === values.length) endGame(true);
                    } else {
                        setTimeout(() => {
                            flipped.forEach(c => c.textContent = '?');
                            flipped = [];
                        }, 500);
                    }
                }
            }

            function endGame(win) {
                clearInterval(countdown);
                timer.style.display = 'none';
                board.innerHTML = win ? 'You won 30 Stickoins!' : "Time's up!";
                if(win) {
                    stickoins += 30;
                    updateBalance();
                }
                saveData();
            }
        }

        // initial
        showSection('home-section');
    </script>
</body>
</html>
